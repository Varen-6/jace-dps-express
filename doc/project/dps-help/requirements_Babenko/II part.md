# Підсистема документування. Аналіз програмних засобів
## 1. Вступ

Даний документ надає описову інформацію по використаним програмним засобам при розробці підсистеми документування. Тобто, тут розміщено основні визначення та опис ПЗ, які використані у проекті.

## 2. Формат файлів для генерації веб-сторінки.
### 2.1 Загальний опис NJK

* [NJK](https://www.filesuffix.com/ru/extension/njk)(Nunjucks Template) - це потужний шаблонний механізм з успадкуванням, асинхронним управлінням в JavaScript.
* Механізм Nunjucks широко використовується у генерації HTML
* Використання API конфігурації
* За допомогою окремих шаблонів можна створити веб-сторінку
* [Офіційна документація по використанню nunjucks](https://mozilla.github.io/nunjucks/getting-started.html)
### 2.2Templating
* Можливе використання будь-якого розширення файлу, яке ви хочете для ваших файлів шаблонів Nunjucks, співтовариство Nunjucks прийняло .njk  
#### 2.2.1 Підсвічування синтаксису  
Посилання на модулі
* [atom]( https://github.com/alohaas/language-nunjucks)
* [vim](https://github.com/niftylettuce/vim-jinja)
* [brackets](https://github.com/axelboc/nunjucks-brackets)
* [sublime](https://github.com/mogga/sublime-nunjucks/blob/master/Nunjucks.tmLanguage)
* [emacs](http://web-mode.org)
* [vscode](https://github.com/ronnidc/vscode-nunjucks)  
#### 2.2.2 Приклади наслідування шаблону  
* Успадкування шаблонів - це спосіб спростити повторне використання коду. Під час написання шаблону ви можете визначити "блоки", які можуть замінити дочірні шаблони . Ланцюжок успадкування може бути скільки завгодно довгим.  
Якщо у нас є шаблон parent.html, який виглядає так:
```javascript
{% block header %}
This is the default content
{% endblock %}

<section class="left">
  {% block left %}{% endblock %}
</section>

<section class="right">
  {% block right %}
  This is more content
  {% endblock %}
</section>
```  
І ми рендеримо цей шаблон:
```javascript
{% extends "parent.html" %}

{% block left %}
This is the left side!
{% endblock %}

{% block right %}
This is the right side!
{% endblock %}
```  
На виводі ми отримуємо:
``` javascript
This is the default content

<section class="left">
  This is the left side!
</section>

<section class="right">
  This is the right side!
</section>
```  
Ви можете зберігати шаблон для успадкування у змінній і використовувати його, опускаючи лапки. Ця змінна може містити рядок, який вказує на файл шаблону, або може містити скомпільований об’єкт шаблон, який був доданий до контексту. Таким чином, ви можете динамічно змінювати, який саме шаблон успадковується під час рендерингу, встановлюючи його в контексті.
```javascript
{% extends parentTemplate %}
```  
Ви використовуєте успадкування за допомогою тегів <b>extends</b> і <b>block</b>. 
## 3. Опис генерації веб-сторінки у проекті jace-doc.

### 3.1 Рендиринг

** Markdown-it **

Рендиринг у проекті відбувається через [markdown-it](https://github.com/markdown-it/markdown-it). Це новий парсер markdown, ключова особливість якого - простота розширення синтаксису. При використанні маркдауна користувач рано чи пізно впирається в те, що чогось не вистачає і треба робити HTML-вставки. У markdown-it можна додавати нові елементи синтаксису через плагіни. В результаті зберігається безпека згенерованої HTML-розмітки і немає необхідності використовувати складні валідатори на кшталт owasp для захисту від XSS.

Парсер написаний на JavaScript і поширюється під ліцензією MIT. Підтримується робота як в браузері, так і в Node.js. Незважаючи на мову програмування і закладену гнучкість, markdown-it має дуже високу швидкість, поступаючись тільки скомпільованим варіантам на С (у яких немає подібної розширюваності). Іншою приємною особливістю парсеру є слідування специфікації CommonMark.

__Micromatch__

__[Micromatch](https://www.npmjs.com/package/micromatch)__ - високо оптимізована бібліотека зіставлення підстановок та глобусів. Заміна і швидша альтернатива minimatch та multimatch. Використовується webpack, babel core, yarn, jest, браузер-синхронізацією, documentation.js, stylelint, nyc, ava та багатьма іншими.

_Extended globbing_

Micromatch підтримує наступні розширені функції глобалізації.

| **шаблон** | **еквівалентний регулярний вираз** | **опис** |
| --- | --- | --- |
| `?(pattern)` | `(pattern)?` | Відповідає нулю або одному входженню даних шаблонів |
| `*(pattern)` | `(pattern)*` | Відповідає нулю або декільком випадкам входження даних шаблонів |
| `+(pattern)` | `(pattern)+` | Відповідає одному або декільком випадкам входження даних шаблонів |
| `@(pattern)` | `(pattern)` <sup>*</sup> | Відповідає одному з даних шаблонів |
| `!(pattern)` | N/A (еквівалентний регулярний вираз набагато складніший) | Відповідає будь-скільком, крім одного з поданих шаблонів |

### 3.2 Шаблони .njk 

Підсистема генерує вебсайт за допомогою шаблонів .njk. Данні шаблони є доступними та простими у використанні.

У проекті вони розташовані за директорією jace-dps-express\build\templates\template.njk.

![](C:\Users\username\Pictures\MLO\mlo_logo.jpg)





